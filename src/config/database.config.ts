import { ConnectionOptions } from "typeorm";
import {
  Address,
  Admin,
  ApiKey,
  Config,
  CurrencyConfig,
  CurrencyToken,
  KmsCmk,
  KmsDataKey,
  LatestBlock,
  MailJob,
  MailLog,
  Notification,
  TransactionLog,
  SocketNotification,
  TransactionOnchain,
  TransactionRequest,
  User,
  BetOnchain,
  RoundOnchain,
} from "../database/entities";

require("dotenv").config();

export const databaseConfig: ConnectionOptions = {
  type: (process.env.TYPEORM_CONNECTION || "mysql") as any,
  host: process.env.TYPEORM_HOST || "localhost",
  port: parseInt(process.env.TYPEORM_PORT) || 3306,
  username: process.env.TYPEORM_USERNAME || "username",
  password: process.env.TYPEORM_PASSWORD || "password",
  database: process.env.TYPEORM_DATABASE || "database",
  entities: [
    CurrencyConfig,
    KmsCmk,
    KmsDataKey,
    MailJob,
    MailLog,
    Admin,
    LatestBlock,
    Config,
    Notification,
    ApiKey,
    CurrencyToken,
    Address,
    TransactionRequest,
    TransactionOnchain,
    TransactionLog,
    SocketNotification,
    User,
    BetOnchain,
    RoundOnchain,
  ],
  synchronize: true,
  logging: true,
  logger: "file",
};
